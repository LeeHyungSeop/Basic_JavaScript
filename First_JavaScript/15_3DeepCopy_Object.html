<!-- Object Deep Copy -->

<html>

    <head>
    </head>

    <body>
        
        <script>

            // Object Deep Copy ///////////////////////////////////////////////////////////////
            
            const a = {
                name : 'john',
                age : '20',
                address : {
                    city : 'incheon',
                    street : 10
                }
            };

            console.log('a : ',a.name,a['age'],a.address.city,a.address.street);

            // const b = Object.assign({},a); ===> Shallow Copy
            const b= JSON.parse(JSON.stringify(a)); // Deep Copy

            b.name = 'alice'; 
            b.address.city = 'Seoul';

            // Deep Copy를 했기 때문에 a는 초기값 그대로이다.
            // == b는 address에 있는 값들까지 reference가 아니라 copy가 성공적으로 됐다.
            console.log('object after---------');
            console.log('a : ',a.name,a['age'],a.address.city,a.address.street); 
            console.log('b : ',b.name,b['age'],b.address.city,b.address.street); 

            /* Deep Shallow

                * JSON은 무엇인가?
                    JavaScipt Object Notation : JS에서 Object를 표현하기 위한 방식.
                    Object : key(속성) + value(값)

                * Object의 형태? 문자열 표시방식으로 key와 value의 쌍으로 나타냄. 전체를 {}로 감싼다.
                {
                    "key1" : "value",
                    "key2" : "valu2",
                    "key3" : "valu3",
                    ..
                }

                * JSON이 왜 필요한가?
                    컴퓨터 networking 때문.
                    A com <-> B com  통신을 할 때, 
                    Object를 주고 받을 때 Object가 통째로 갈 수 없으니까 문자열로 바꾼다.
                    문자열로 바꿀때 JSON이라는 format으로 취한다.

                * JavaScript에서 지원하는 JSON의 2가지 방법
                JSON - Stringify (Object -> 문자열)
                     - Parse     (문자열 -> Object) 

                * Deep Copy 코드분석
                const b= JSON.parse(JSON.stringify(a));
                ->
                JSON.stringify(a) : Object a를 JSON format의 string(문자열)으로 바꾼다. 
                JSON.parse : 만들어진 문자열로부터 Object b를 다시 만들어낸다.
                == 따라서 Object b는 Object a를 reference하는 것이 아니라
                   a와는 완전히 별개의 하나의 Object가 만들어진 것이다.

            */
            
        </script>

    </body>

</html>